<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tầng</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">

<div class="nav">
  <button onclick="back()">⬅</button>
  <button onclick="logout()">Đăng xuất</button>
</div>

<div class="card">
  <input id="floorName" placeholder="Tên tầng">
  <button onclick="addFloor()">Thêm tầng</button>
</div>

<div id="floorList"></div>

</div>

<script src="admin.js"></script>
<script>
function back(){location.href="admin.html";}
const baseIndex=localStorage.getItem("currentBase");

function addFloor(){
  const d=getData();
  d[baseIndex].floors.push({name:floorName.value, rooms:[]});
  saveData(d);
  floorName.value="";
  renderFloor();
}

function openFloor(i){
  localStorage.setItem("currentFloor",i);
  location.href="phong.html";
}

function removeFloor(i){
  const d=getData();
  d[baseIndex].floors.splice(i,1);
  saveData(d);
  renderFloor();
}

function renderFloor(){
  const floors=getData()[baseIndex].floors;
  floorList.innerHTML="";
  floors.forEach((f,i)=>{
    floorList.innerHTML+=`
    <div class="card list-item">
      ${f.name}
      <div>
        <button onclick="openFloor(${i})">Mở</button>
        <button class="danger" onclick="removeFloor(${i})">Xóa</button>
      </div>
    </div>`;
  });
}
renderFloor();
</script>
</body>
</html>
