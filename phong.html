<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Phòng</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">

<div class="nav">
  <button onclick="back()">⬅</button>
</div>

<div class="card">
  <input id="roomName" placeholder="Số phòng">
  <button onclick="addRoom()">Thêm phòng</button>
</div>

<div id="roomList"></div>

</div>

<script src="admin.js"></script>
<script>
const b=localStorage.getItem("currentBase");
const f=localStorage.getItem("currentFloor");

function back(){location.href="tang.html";}

function addRoom(){
  const d=getData();
  d[b].floors[f].rooms.push({name:roomName.value,guest:null});
  saveData(d);
  roomName.value="";
  renderRoom();
}

function openRoom(i){
  localStorage.setItem("currentRoom",i);
  location.href="khach.html";
}

function removeRoom(i){
  const d=getData();
  d[b].floors[f].rooms.splice(i,1);
  saveData(d);
  renderRoom();
}

function renderRoom(){
  const rooms=getData()[b].floors[f].rooms;
  roomList.innerHTML="";
  rooms.forEach((r,i)=>{
    roomList.innerHTML+=`
    <div class="card list-item">
      Phòng ${r.name}
      <div>
        <button onclick="openRoom(${i})">Mở</button>
        <button class="danger" onclick="removeRoom(${i})">Xóa</button>
      </div>
    </div>`;
  });
}
renderRoom();
</script>
</body>
</html>
